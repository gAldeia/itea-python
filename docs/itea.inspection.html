

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>itea.inspection &mdash; Interaction-Transformation Evolutionary Algorithm</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="_static/favicon.png"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Using agnostic explainers" href="_agnostic_explainers.html" />
    <link rel="prev" title="itea.classification" href="itea.classification.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> ITEA: Interaction-Transformation Evolutionary Algorithm
          

          
            
            <img src="_static/itea-logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">ITEA package documentation:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="base.html">itea._base</a></li>
<li class="toctree-l1"><a class="reference internal" href="itea.regression.html">itea.regression</a></li>
<li class="toctree-l1"><a class="reference internal" href="itea.classification.html">itea.classification</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">itea.inspection</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#itexpr-explainer">ITExpr_explainer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#itexpr-inspector">ITExpr_inspector</a></li>
<li class="toctree-l2"><a class="reference internal" href="#itexpr-texifier">ITExpr_texifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="#itea-summarizer">ITEA_summarizer</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Examples:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="_agnostic_explainers.html">Using agnostic explainers</a></li>
<li class="toctree-l1"><a class="reference internal" href="_explanations_stability.html">Explanations Stability</a></li>
<li class="toctree-l1"><a class="reference internal" href="_multiclass_example.html">Iris classification</a></li>
<li class="toctree-l1"><a class="reference internal" href="_regression_example.html">California housing regression</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ITEA: Interaction-Transformation Evolutionary Algorithm</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>itea.inspection</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/itea.inspection.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="module-itea.inspection">
<span id="itea-inspection"></span><h1>itea.inspection<a class="headerlink" href="#module-itea.inspection" title="Permalink to this headline">¶</a></h1>
<p>Interaction Transformation expression’s <strong>Inspector</strong></p>
<p>Sub-module containing three classes to help inspect and explain the
results obtained with the itea.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ITExpr_explainer</span></code>: Implementations of feature importances methods specific
to the Interaction-Transformation representation, and several visualization
tools to help interpret the final expression;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ITExpr_inspector</span></code>: Based on a more statistical approach, this class
implements methods to measure the quality of the final expression by
calculating information between individual terms;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ITExpr_texifier</span></code>: Creation of latex representations of the final expression
and its derivatives. In cases where the final expression is simple enough,
the analysis of the expression can provide useful insights.</p></li>
</ul>
<p>All the modules are designed to work with <cite>ITExpr`s. After the evolutionary
process is performed (by calling `fit()</cite> on the <cite>ITEA_classifier</cite> or
<cite>ITEA_regressor</cite>), the best final expression can be accessed by
<cite>itea.bestsol_</cite>, and those classes are specialized in different ways of
inspecting the final model.</p>
<p>Additionally, there is one class designed to work with the ´`itea``, instead
of <code class="docutils literal notranslate"><span class="pre">ITExpr</span></code> expressions. The class <code class="docutils literal notranslate"><span class="pre">ITEA_summarizer</span></code> implements a method
to automatically create a pdf file containing information generated with
all the inspection classes, in an attempt to automate the task of generating
an interpretability report.</p>
<p><strong>Sub-module contents:</strong></p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#itexpr-explainer" id="id1">ITExpr_explainer</a></p></li>
<li><p><a class="reference internal" href="#itexpr-inspector" id="id2">ITExpr_inspector</a></p></li>
<li><p><a class="reference internal" href="#itexpr-texifier" id="id3">ITExpr_texifier</a></p></li>
<li><p><a class="reference internal" href="#itea-summarizer" id="id4">ITEA_summarizer</a></p></li>
</ul>
</div>
<hr class="docutils" />
<section id="itexpr-explainer">
<h2><a class="toc-backref" href="#id1">ITExpr_explainer</a><a class="headerlink" href="#itexpr-explainer" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="itea.inspection.ITExpr_explainer">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">itea.inspection.</span></span><span class="sig-name descname"><span class="pre">ITExpr_explainer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">itexpr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tfuncs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tfuncs_dx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/itea/inspection/_ITExpr_explainer.html#ITExpr_explainer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#itea.inspection.ITExpr_explainer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class to explain ITExpr expressions.</p>
<p>Constructor method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>itexpr</strong> (<a class="reference internal" href="itea.regression.html#itea.regression.ITExpr_regressor" title="itea.regression.ITExpr_regressor"><em>ITExpr_regressor</em></a><em> or </em><a class="reference internal" href="itea.classification.html#itea.classification.ITExpr_classifier" title="itea.classification.ITExpr_classifier"><em>ITExpr_classifier</em></a>) – fitted instance of an <code class="docutils literal notranslate"><span class="pre">ITExpr</span></code> class to be explained.</p></li>
<li><p><strong>tfuncs</strong> (<em>dict</em>) – transformations functions. Should always
be a dict where the keys are the names of the transformation
functions and the values are unary vectorized functions.</p></li>
<li><p><strong>tfuncs_dx</strong> (<em>dict</em><em>, </em><em>default=None</em>) – derivatives of the
given transformations functions, the same scheme.
When set to None, the itea package will use automatic
differentiation  through jax to create the derivatives.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="itea.inspection.ITExpr_explainer.average_partial_effects">
<span class="sig-name descname"><span class="pre">average_partial_effects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/itea/inspection/_ITExpr_explainer.html#ITExpr_explainer.average_partial_effects"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#itea.inspection.ITExpr_explainer.average_partial_effects" title="Permalink to this definition">¶</a></dt>
<dd><p>Feature importance estimation through the Partial Effects method.</p>
<p>This method attributes the importance to the i-th variable by
using the mean value of the partial derivative w.r.t. i, evaluated for
all data in X.</p>
<p>This method assumes that every feature is continuous.</p>
<p>The partial effect of a given variable for a function <img class="math" src="_images/math/5b7752c757e0b691a80ab8227eadb8a8389dc58a.png" alt="f"/> is
calculated by:</p>
<p><img class="math" src="_images/math/57a02ed79986a136e6e0f1a79f2cc93e200bf266.png" alt="PE_j = \frac{\partial \widehat{f}}{\partial x_j}
(\mathbf{x}, \mathbf{\beta})."/></p>
<p>The IT expression can be automatically differentiated:</p>
<p><img class="math" src="_images/math/8566aa583c4b0b289d0ff0a2e9fc292381d42bd8.png" alt="\frac{\partial  \widehat{f}(x)}{\partial x_j} = w_1
\cdot it'_1(x) + \ldots + w_m \cdot it'_m(x),"/></p>
<p>where</p>
<p><img class="math" src="_images/math/113fb85363db66a3990204255a049061704eff9f.png" alt="it'_i(x) = g'_i(p_i(x)) \cdot p'_i(x),"/></p>
<p><img class="math" src="_images/math/f58f8c1926701416b3078c992a4b67cc4b2c7be2.png" alt="p'_i(x) = k_j\frac{p_i(x)}{x_j}."/></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>X</strong> (<em>numpy.array of shape</em><em> (</em><em>n_samples</em><em>, </em><em>n_features</em><em>)</em>) – data from which we want to extract the feature importances for
the predicted outcomes of the model.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>ape</strong> – the importance of each feature of X. for each class found in the
given itexpr. If itexpr is an <code class="docutils literal notranslate"><span class="pre">ITExpr_regressor</span></code>, then the
returned array have shape (1, n_features).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array of shape (n_classes, n_features)</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This feature importance measure is based on the paper:
“Aldeia, G. &amp; França, F. (2021).
Measuring Feature Importance of Symbolic Regression Models
GECCO.”</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="itea.inspection.ITExpr_explainer.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/itea/inspection/_ITExpr_explainer.html#ITExpr_explainer.fit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#itea.inspection.ITExpr_explainer.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit method to store the data used in the training of the given
itexpr instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>array-like of shape</em><em> (</em><em>n_samples</em><em>, </em><em>n_features</em><em>)</em>) – data used to train the itexpr model.</p></li>
<li><p><strong>y</strong> (<em>array-like of shape</em><em> (</em><em>n_samples</em><em>, </em><em>)</em>) – target data used to train the itexpr model.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>self</strong> – explainer with a calculated covariance matrix, ready to generate
plots and explanations.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#itea.inspection.ITExpr_explainer" title="itea.inspection.ITExpr_explainer">ITExpr_explainer</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>NotFittedError</strong> – If the given <code class="docutils literal notranslate"><span class="pre">itexpr</span></code> is not fitted.</p></li>
<li><p><strong>KeyError</strong> – If not all keys of <code class="docutils literal notranslate"><span class="pre">tfuncs</span></code> are contained
    in the keys of <code class="docutils literal notranslate"><span class="pre">tfuncs_dx</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="itea.inspection.ITExpr_explainer.plot_feature_importances">
<span class="sig-name descname"><span class="pre">plot_feature_importances</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">barh_kw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grouping_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">importance_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'pe'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/itea/inspection/_ITExpr_explainer.html#ITExpr_explainer.plot_feature_importances"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#itea.inspection.ITExpr_explainer.plot_feature_importances" title="Permalink to this definition">¶</a></dt>
<dd><p>Bar plot of the feature importances, that can be calculated with
the Partial effects (PE) or Shapley Values (shapley).</p>
<img alt="_images/plot_feature_importances_1.png" class="align-center" src="_images/plot_feature_importances_1.png" />
<img alt="_images/plot_feature_importances_2.png" class="align-center" src="_images/plot_feature_importances_2.png" />
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>array-like of shape</em><em> (</em><em>n_samples</em><em>, </em><em>n_features</em><em>)</em>) – data to explain.</p></li>
<li><p><strong>bar_kw</strong> (<em>dict</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – dictionary with keywords to be used when generating the plots.
When set to None, then <code class="docutils literal notranslate"><span class="pre">bar_kw=</span> <span class="pre">{'alpha':1.0,</span> <span class="pre">'align':'center'}</span></code>.</p></li>
<li><p><strong>ax</strong> (<em>matplotlib.axes</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – axis to generate the plot. If none is given, then a new axis is
created. if is a single axis, the plot will be drawn within the
given axis.</p></li>
<li><p><strong>grouping_threshold</strong> (<em>float</em><em>, </em><em>default = 0.05</em>) – The features will be iterated in order of importance, from the
smallest to the highest importance, and a group of the smallest
features that sum up less than the given percentage of importance
will be grouped to reduce the plot information.
To disable the creation of the group, set <code class="docutils literal notranslate"><span class="pre">grouping_threshold=0</span></code>.</p></li>
<li><p><strong>target</strong> (<em>string</em><em>, </em><em>int</em><em>, </em><em>list</em><em>[</em><em>strings</em><em>]</em><em>, </em><em>list</em><em>[</em><em>ints</em><em>] or </em><em>None</em><em>, </em><em>default=None</em>) – The targets to be considered when generating the plot for
<code class="docutils literal notranslate"><span class="pre">ITExpr_classifier</span></code>. If the training data used strings as targets
on <code class="docutils literal notranslate"><span class="pre">y</span></code>, then the target must be a string of a valid class or a
list of valid classes. If the training data was encoded as integers,
then the target must be an int or a list of integers.
This argument is ignored if the itexpr is an <code class="docutils literal notranslate"><span class="pre">ITExpr_regressor</span></code>.</p></li>
<li><p><strong>importance_method</strong> (<em>string</em><em>, </em><em>default='pe'</em>) – string specifying which method should be used to estimate feature
importances. Available methods are: <code class="docutils literal notranslate"><span class="pre">['pe',</span> <span class="pre">'shapley']</span></code>.</p></li>
<li><p><strong>show</strong> (<em>bool</em><em>, </em><em>default=True</em>) – boolean value indicating if the generated plot should be displayed
or not.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <code class="docutils literal notranslate"><span class="pre">ax</span></code> or <code class="docutils literal notranslate"><span class="pre">target</span></code> has invalid values.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This plot is heavily inspired by the <a class="reference external" href="https://shap.readthedocs.io/en/latest/example_notebooks/api_examples/plots/bar.html">bar plot from the SHAP package</a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="itea.inspection.ITExpr_explainer.plot_normalized_partial_effects">
<span class="sig-name descname"><span class="pre">plot_normalized_partial_effects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">grouping_threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stack_kw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/itea/inspection/_ITExpr_explainer.html#ITExpr_explainer.plot_normalized_partial_effects"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#itea.inspection.ITExpr_explainer.plot_normalized_partial_effects" title="Permalink to this definition">¶</a></dt>
<dd><p>Partial effects plots, separing the training data into discrete
intervals.</p>
<p>First, the output interval is discretized. Then, for each interval,
the partial effect of the sample data that evaluation is within the
interval is calculated. Finally, they are normalized in order to
make the total contribution by 100%.</p>
<img alt="_images/plot_normalized_partial_effects_1.png" class="align-center" src="_images/plot_normalized_partial_effects_1.png" />
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_points</strong> (<em>int</em><em>, </em><em>default = 20</em>) – the number of points to divide the interval when generating the
plots. This is ignored if <code class="docutils literal notranslate"><span class="pre">itexpr</span> <span class="pre">==</span> <span class="pre">ITExpr_classifier</span></code></p></li>
<li><p><strong>grouping_threshold</strong> (<em>float</em><em>, </em><em>default = 0.05</em>) – The features will be iterated in order of importance, from the
smallest to the highest importance, and a group of the smallest
features that sum up less than the given percentage of importance
will be grouped to reduce the plot information.
To disable the creation of the group, set <code class="docutils literal notranslate"><span class="pre">grouping_threshold=0</span></code>.</p></li>
<li><p><strong>stack_kw</strong> (<em>dict</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – dictionary with keywords to be used when generating the plots.
When set to None, then stack_kw is <code class="docutils literal notranslate"><span class="pre">{'baseline':</span> <span class="pre">'zero',</span>
<span class="pre">'labels':</span> <span class="pre">labels,</span> <span class="pre">'edgecolor':</span> <span class="pre">'k',</span> <span class="pre">'alpha':</span> <span class="pre">0.75}</span></code>.</p></li>
<li><p><strong>ax</strong> (<em>matplotlib.axes</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – axis to generate the plot. If none is given, then a new axis is
created. if is a single axis, the plot will be drawn within the
given axis.</p></li>
<li><p><strong>show</strong> (<em>bool</em><em>, </em><em>default=True</em>) – boolean value indicating if the generated plot should be displayed
or not.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <code class="docutils literal notranslate"><span class="pre">ax</span></code> has invalid values.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This plot was inspired by the relative feature contribution plot
reported in the paper:
“R. M. Filho, A. Lacerda and G. L. Pappa, “Explaining Symbolic
Regression Predictions,” 2020 IEEE Congress on Evolutionary Computation
(CEC)”.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="itea.inspection.ITExpr_explainer.plot_partial_effects_at_means">
<span class="sig-name descname"><span class="pre">plot_partial_effects_at_means</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">features</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(5,</span> <span class="pre">95)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_points</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_cols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_kw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_kw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_err</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">share_y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/itea/inspection/_ITExpr_explainer.html#ITExpr_explainer.plot_partial_effects_at_means"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#itea.inspection.ITExpr_explainer.plot_partial_effects_at_means" title="Permalink to this definition">¶</a></dt>
<dd><p>Partial effects plots for the given features, when their
co-variables are fixed at the mean.</p>
<img alt="_images/plot_partial_effects_at_means_1.png" class="align-center" src="_images/plot_partial_effects_at_means_1.png" />
<img alt="_images/plot_partial_effects_at_means_2.png" class="align-center" src="_images/plot_partial_effects_at_means_2.png" />
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>numpy.array of shape</em><em> (</em><em>n_samples</em><em>, </em><em>n_features</em><em>)</em>) – data from which we want to extract the feature importances for
the predicted outcomes of the model.</p></li>
<li><p><strong>features</strong> (<em>string</em><em>, </em><em>list</em><em>[</em><em>string</em><em>]</em><em>, </em><em>int</em><em>, </em><em>list</em><em>[</em><em>int</em><em>] or </em><em>None</em><em>, </em><em>default=None</em>) – the features to generate the plots. It can be a single feature
referred to by its label or its index or a list of features.</p></li>
<li><p><strong>percentiles</strong> (<em>tuple of ints</em><em>, </em><em>default=</em><em>(</em><em>5</em><em>, </em><em>95</em><em>)</em>) – the quartiles interval to generate the plot.</p></li>
<li><p><strong>num_points</strong> (<em>int</em><em>, </em><em>default = 100</em>) – the number of points to divide the interval when generating the
plots.</p></li>
<li><p><strong>n_cols</strong> (<em>int</em><em>, </em><em>default=3</em>) – number of columns to be used when creating the plot grids if
ax is None.</p></li>
<li><p><strong>target</strong> (<em>string</em><em>, </em><em>int</em><em>, </em><em>list</em><em>[</em><em>strings</em><em>]</em><em>, </em><em>list</em><em>[</em><em>ints</em><em>] or </em><em>None</em><em>, </em><em>default=None</em>) – The targets to be considered when generating the plot for
<code class="docutils literal notranslate"><span class="pre">ITExpr_classifier</span></code>. If the training data used strings as targets
on <code class="docutils literal notranslate"><span class="pre">y</span></code>, then the target must be a string of a valid class or a
list of valid classes. If the training data was encoded as integers,
then the target must be an int or a list of integers.
This argument is ignored if the itexpr is an <code class="docutils literal notranslate"><span class="pre">ITExpr_regressor</span></code>.</p></li>
<li><p><strong>line_kw</strong> (<em>dict</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – dictionary with keywords to be used when generating the plots.
When set to None, then <code class="docutils literal notranslate"><span class="pre">line_kw=</span> <span class="pre">{}</span></code>.</p></li>
<li><p><strong>fill_kw</strong> (<em>dict</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – dictionary with keywords to be used when generating the plots.
When set to None, then <code class="docutils literal notranslate"><span class="pre">fill_kw=</span> <span class="pre">{'alpha'</span> <span class="pre">:</span> <span class="pre">0.15}</span></code>.</p></li>
<li><p><strong>ax</strong> (<em>matplotlib.axes</em><em> or </em><em>list of matplotlib.axes</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – axis to generate the plot. If none is given, then a new axis is
created. If is a single axis, the plot will be drawn within the
given axis. If ax is a list, then it must have the same number of
elements in <code class="docutils literal notranslate"><span class="pre">features</span></code>.</p></li>
<li><p><strong>show_err</strong> (<em>bool</em><em>, </em><em>default=True</em>) – boolean variable indicating if the standard error should be plotted.</p></li>
<li><p><strong>share_y</strong> (<em>bool</em><em>, </em><em>default True</em>) – boolean variable to specify if the axis should have the same
interval on the y axis.</p></li>
<li><p><strong>show</strong> (<em>bool</em><em>, </em><em>default=True</em>) – boolean value indicating if the generated plot should be displayed
or not.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>ValueError</strong> – If <code class="docutils literal notranslate"><span class="pre">ax</span></code> or <code class="docutils literal notranslate"><span class="pre">target</span></code> has invalid values.</p></li>
<li><p><strong>IndexError</strong> – If one or more specified features are not in
    <code class="docutils literal notranslate"><span class="pre">explainer.itexpr</span></code> labels.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>This plot is heavily inspired by the <a class="reference external" href="https://scikit-learn.org/stable/modules/partial_dependence.html">Partial Dependency Plot from
scikit-learn</a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="itea.inspection.ITExpr_explainer.selected_features">
<span class="sig-name descname"><span class="pre">selected_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">idx</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/itea/inspection/_ITExpr_explainer.html#ITExpr_explainer.selected_features"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#itea.inspection.ITExpr_explainer.selected_features" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to identify if any of the original features were left out
of the IT expression during the evolution of the exponents’ array.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>idx</strong> (<em>bool</em><em>, </em><em>default=False</em>) – boolean variable specifying if the method should return a list
with the labels of the features or their indexes.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>selected</strong> – array containing the labels of the features that are present in
the model, or their indexes if <code class="docutils literal notranslate"><span class="pre">idx=True</span></code>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>array of shape (n_selected_features)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="itea.inspection.ITExpr_explainer.shapley_values">
<span class="sig-name descname"><span class="pre">shapley_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/itea/inspection/_ITExpr_explainer.html#ITExpr_explainer.shapley_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#itea.inspection.ITExpr_explainer.shapley_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Feature importance estimation through approximation of the
shapley values with the gradient information.</p>
<p>The shapley values come from the coalitional game theory and were
proposed as a feature importance measures by Scott Lundberg in
“Scott M. Lundberg and Su-In Lee. 2017. A unified approach to
interpreting model predictions. NIPS”. The equation:</p>
<p><img class="math" src="_images/math/80cce9c1704a07c91546fb374af6cab624e1a66b.png" alt="\phi_j(x) = \sum_{Q \subseteq S \setminus \left\{j\right\}}
{\frac{|Q|!(|S| - |Q| - 1)!}{|S|!}
(\Delta_{Q \cup \{j\}}(x) - \Delta_{Q}(x))},"/></p>
<p>where <img class="math" src="_images/math/b988975be41fd13b4d091c10202ba19374643586.png" alt="S"/> is the set of variables, <img class="math" src="_images/math/14e904cd8138905225ce88e4e3beb2c6a46d79b3.png" alt="\Delta_Q"/> is the
contribution of the set <img class="math" src="_images/math/90cab5ae70bdb6e45756490226ba488f522c4c4e.png" alt="Q"/>, the difference between the
prediction when we fix the values of <img class="math" src="_images/math/90cab5ae70bdb6e45756490226ba488f522c4c4e.png" alt="Q"/>, and the expected
prediction.</p>
<p>It is possible to approximate these values by the equation:</p>
<p><img class="math" src="_images/math/bfdc57572c2019d78968698ad5f309526ca1ae4e.png" alt="\widehat{\phi_j}(x) = \mathbb{E}[PE_j]
\cdot (x_j - \mathbb{E}[x_j]),"/></p>
<p>Where <img class="math" src="_images/math/a977639ded663f03f036ca55103a0c00fa9704c0.png" alt="PE_j"/> is the partial effect w.r.t <img class="math" src="_images/math/e3fc28292267f066fee7718c64f4bbfece521f24.png" alt="j"/>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>X</strong> (<em>numpy.array of shape</em><em> (</em><em>n_samples</em><em>, </em><em>n_features</em><em>)</em>) – data from which we want to extract the feature importances for
the predicted outcomes of the model.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>shapley_values</strong> – the importance of each feature of X.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy.array of shape (n_features, )</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The shapley values are described and explained in:
“Scott M. Lundberg and Su-In Lee. 2017. A unified approach to
interpreting model predictions. NIPS”</p>
<p>The approximation of shapley values by means of the partial effect
was studied in the paper:
This feature importance measure is based on the paper:
“Aldeia, G. &amp; França, F. (2021).
Measuring Feature Importance of Symbolic Regression Models
GECCO.”</p>
</dd></dl>

</dd></dl>

</section>
<hr class="docutils" />
<section id="itexpr-inspector">
<h2><a class="toc-backref" href="#id2">ITExpr_inspector</a><a class="headerlink" href="#itexpr-inspector" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="itea.inspection.ITExpr_inspector">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">itea.inspection.</span></span><span class="sig-name descname"><span class="pre">ITExpr_inspector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">itexpr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tfuncs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decimal_places</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/itea/inspection/_ITExpr_inspector.html#ITExpr_inspector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#itea.inspection.ITExpr_inspector" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>class ITExpr_inspector.</p>
<p>Based on a more statistical approach, this class
implements methods to measure the quality of the final expression by
calculating information between individual terms.</p>
<p>Constructor method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>itexpr</strong> (<a class="reference internal" href="itea.regression.html#itea.regression.ITExpr_regressor" title="itea.regression.ITExpr_regressor"><em>ITExpr_regressor</em></a><em> or </em><a class="reference internal" href="itea.classification.html#itea.classification.ITExpr_classifier" title="itea.classification.ITExpr_classifier"><em>ITExpr_classifier</em></a>) – fitted instance of an <code class="docutils literal notranslate"><span class="pre">ITExpr</span></code> class to be explained.</p></li>
<li><p><strong>tfuncs</strong> (<em>dict</em>) – transformations functions. Should always
be a dict where the keys are the names of the transformation
functions and the values are unary vectorized functions.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="itea.inspection.ITExpr_inspector.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/itea/inspection/_ITExpr_inspector.html#ITExpr_inspector.fit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#itea.inspection.ITExpr_inspector.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit method to store the data used in the training of the given
itexpr instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>array-like of shape</em><em> (</em><em>n_samples</em><em>, </em><em>n_features</em><em>)</em>) – data used to train the itexpr model.</p></li>
<li><p><strong>y</strong> (<em>array-like of shape</em><em> (</em><em>n_samples</em><em>, </em><em>)</em>) – target data used to train the itexpr model.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>self</strong> – inspector with the calculated covariance matrix.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#itea.inspection.ITExpr_inspector" title="itea.inspection.ITExpr_inspector">ITExpr_inspector</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="itea.inspection.ITExpr_inspector.terms_analysis">
<span class="sig-name descname"><span class="pre">terms_analysis</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/itea/inspection/_ITExpr_inspector.html#ITExpr_inspector.terms_analysis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#itea.inspection.ITExpr_inspector.terms_analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to calculate different metrics for the terms composing
the IT expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><p><strong>analysis</strong> – returns a dictionary containing several term information
and metrics calculated for each term:</p>
<ul class="simple">
<li><p>coef: coefficient of each term (or coefficients, if the
itexpr is an instance of <code class="docutils literal notranslate"><span class="pre">ITExpr_classifier</span></code>);</p></li>
<li><p>func: transformation function of each term;</p></li>
<li><p>strengths: the exponents of each term;</p></li>
<li><p>coef stderr.: the standard error of the coefficients;</p></li>
<li><p>mean pairwise disentanglement: the mean disentanglement between
each term when compared with the others;</p></li>
<li><p>mean mutual information: the mean continuous mutual information
between each term when compared with the others;</p></li>
<li><p>prediction var.: the variance of the predicted outcomes for
each term when predicting the training data.</p></li>
</ul>
</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>dict</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<hr class="docutils" />
<section id="itexpr-texifier">
<h2><a class="toc-backref" href="#id3">ITExpr_texifier</a><a class="headerlink" href="#itexpr-texifier" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="itea.inspection.ITExpr_texifier">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">itea.inspection.</span></span><span class="sig-name descname"><span class="pre">ITExpr_texifier</span></span><a class="reference internal" href="_modules/itea/inspection/_ITExpr_texifier.html#ITExpr_texifier"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#itea.inspection.ITExpr_texifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>class containing static methods to create LaTeX representations of the
expression.</p>
<dl class="py method">
<dt class="sig sig-object py" id="itea.inspection.ITExpr_texifier.derivatives_to_latex">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">derivatives_to_latex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">itexpr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">term_separator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'</span> <span class="pre">+</span> <span class="pre">'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">term_wrapper</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/itea/inspection/_ITExpr_texifier.html#ITExpr_texifier.derivatives_to_latex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#itea.inspection.ITExpr_texifier.derivatives_to_latex" title="Permalink to this definition">¶</a></dt>
<dd><p>Static method that takes an instance of an <code class="docutils literal notranslate"><span class="pre">ITExpr</span></code> and returns
a list containing a latex representation of each partial derivative
of the expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>itexpr</strong> (<a class="reference internal" href="itea.classification.html#itea.classification.ITExpr_classifier" title="itea.classification.ITExpr_classifier"><em>ITExpr_classifier</em></a><em> or </em><a class="reference internal" href="itea.regression.html#itea.regression.ITExpr_regressor" title="itea.regression.ITExpr_regressor"><em>ITExpr_regressor</em></a>) – an instance of itexpr to be texified.</p></li>
<li><p><strong>term_separator</strong> (<em>string</em><em>, </em><em>default=' + '</em>) – string to be used to concatenate each term.</p></li>
<li><p><strong>term_wrapper</strong> (<em>None</em><em> or </em><em>Callable</em><em>, </em><em>default=None</em>) – <p>a function that takes two arguments: <code class="docutils literal notranslate"><span class="pre">i</span></code> the index of the term
and <code class="docutils literal notranslate"><span class="pre">term</span></code> the term itself, and returns a string. This can be
used to add special formatations to the terms. Examples are:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">i,</span> <span class="pre">term:</span> <span class="pre">r'\underbrace{'+term+r'}</span>
<span class="pre">_{\text{term</span> <span class="pre">'+str(i)+'}}'</span></code> to add a underbracket with the
index of the term;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">i,</span> <span class="pre">term:</span> <span class="pre">term</span></code> to do nothing;</p></li>
</ul>
<p>When set to None, then the latter expression will be used.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>itexpr_latexs</strong> – list of strings, where each string is a latex representation
of the partial derivative of the given itexpr.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list[string]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="itea.inspection.ITExpr_texifier.to_latex">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">to_latex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">itexpr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">term_separator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'</span> <span class="pre">+</span> <span class="pre">'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">term_wrapper</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/itea/inspection/_ITExpr_texifier.html#ITExpr_texifier.to_latex"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#itea.inspection.ITExpr_texifier.to_latex" title="Permalink to this definition">¶</a></dt>
<dd><p>Static method that takes an instance of an <code class="docutils literal notranslate"><span class="pre">ITExpr</span></code> and returns
a latex representation of the expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>itexpr</strong> (<a class="reference internal" href="itea.classification.html#itea.classification.ITExpr_classifier" title="itea.classification.ITExpr_classifier"><em>ITExpr_classifier</em></a><em> or </em><a class="reference internal" href="itea.regression.html#itea.regression.ITExpr_regressor" title="itea.regression.ITExpr_regressor"><em>ITExpr_regressor</em></a>) – an instance of itexpr to be texified.</p></li>
<li><p><strong>term_separator</strong> (<em>string</em><em>, </em><em>default=' + '</em>) – string to be used to concatenate each term.</p></li>
<li><p><strong>term_wrapper</strong> (<em>None</em><em> or </em><em>Callable</em><em>, </em><em>default=None</em>) – <p>a function that takes two arguments: <code class="docutils literal notranslate"><span class="pre">i</span></code> the index of the term
and <code class="docutils literal notranslate"><span class="pre">term</span></code> the term itself, and returns a string. This can be
used to add special formatting to the terms. Examples are:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">i,</span> <span class="pre">term:</span> <span class="pre">r'\underbrace{'+term+r'}</span>
<span class="pre">_{\text{term</span> <span class="pre">'+str(i)+'}}'</span></code> to add a underbracket with the
index of the term;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lambda</span> <span class="pre">i,</span> <span class="pre">term:</span> <span class="pre">term</span></code> to do nothing;</p></li>
</ul>
<p>When set to None, then the latter expression will be used.</p>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>itexpr_latex</strong> – latex expression representing the given itexpr.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>string</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<hr class="docutils" />
<section id="itea-summarizer">
<h2><a class="toc-backref" href="#id4">ITEA_summarizer</a><a class="headerlink" href="#itea-summarizer" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="itea.inspection.ITEA_summarizer">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">itea.inspection.</span></span><span class="sig-name descname"><span class="pre">ITEA_summarizer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">itea</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/itea/inspection/_ITEA_summarizer.html#ITEA_summarizer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#itea.inspection.ITEA_summarizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class to automatically generate a pdf file reporting
several interpretability plots for the expression.</p>
<p>Constructor method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>itea</strong> (<a class="reference internal" href="itea.classification.html#itea.classification.ITEA_classifier" title="itea.classification.ITEA_classifier"><em>ITEA_classifier</em></a><em> or </em><a class="reference internal" href="itea.regression.html#itea.regression.ITEA_regressor" title="itea.regression.ITEA_regressor"><em>ITEA_regressor</em></a>) – fitted instance of an <code class="docutils literal notranslate"><span class="pre">ITEA</span></code> class to be summarized.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="itea.inspection.ITEA_summarizer.autoreport">
<span class="sig-name descname"><span class="pre">autoreport</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">save_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name_suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_temp_folder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/itea/inspection/_ITEA_summarizer.html#ITEA_summarizer.autoreport"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#itea.inspection.ITEA_summarizer.autoreport" title="Permalink to this definition">¶</a></dt>
<dd><p>automatically generate a pdf using the methods implemented in
<code class="docutils literal notranslate"><span class="pre">ITExpr_inspector</span></code>, <code class="docutils literal notranslate"><span class="pre">ITExpr_explainer</span></code>, and <code class="docutils literal notranslate"><span class="pre">ITExpr_texifier</span></code>.</p>
<p>The idea is to simplify the generation of the plots and tables,
taking from the user the need to understand, instantiate the classes
and call the plots functions.</p>
<p>This method makes usage of the <code class="docutils literal notranslate"><span class="pre">PyLaTeX</span></code> package and requires a
visible latex installation to work properly.</p>
<p>The .tex file used to generate the pdf will also be saved on the
designed path.</p>
<p>You can download one example of report
<a class="reference download internal" download="" href="_downloads/9c3fbd5d670315f6f4aadfca83d04792/Report.pdf"><code class="xref download docutils literal notranslate"><span class="pre">by</span> <span class="pre">clicking</span> <span class="pre">here</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>save_path</strong> (<em>string</em><em>, </em><em>default='.'</em>) – path to save the pdf report. The file will be saved as “Report.pdf”,
unless a <code class="docutils literal notranslate"><span class="pre">name_suffix</span></code> is provided.
A Te</p></li>
<li><p><strong>name_suffix</strong> (<em>string</em><em>, </em><em>default=&quot;&quot;</em>) – suffix to add in the name of the report.</p></li>
<li><p><strong>use_temp_folder</strong> (<em>boolean</em><em>, </em><em>defaut=True</em>) – specifies if a temporary folder should be used to save the plots
during the creation of the report. If false, then the plots will
be saved on the <code class="docutils literal notranslate"><span class="pre">save_path</span></code>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="itea.inspection.ITEA_summarizer.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/itea/inspection/_ITEA_summarizer.html#ITEA_summarizer.fit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#itea.inspection.ITEA_summarizer.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit method to store the data used in the training of the given
itea instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>array-like of shape</em><em> (</em><em>n_samples</em><em>, </em><em>n_features</em><em>)</em>) – data used to train the itexpr model.</p></li>
<li><p><strong>y</strong> (<em>array-like of shape</em><em> (</em><em>n_samples</em><em>, </em><em>)</em>) – target data used to train the itexpr model.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>self</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#itea.inspection.ITEA_summarizer" title="itea.inspection.ITEA_summarizer">ITEA_summarizer</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="itea.inspection.ITEA_summarizer.plot_convergence">
<span class="sig-name descname"><span class="pre">plot_convergence</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_cols</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">line_kw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fill_kw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_err</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/itea/inspection/_ITEA_summarizer.html#ITEA_summarizer.plot_convergence"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#itea.inspection.ITEA_summarizer.plot_convergence" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot of information about the <code class="docutils literal notranslate"><span class="pre">itea</span></code> evolutionary process.
This function is intended to help visualize the information on the
<code class="docutils literal notranslate"><span class="pre">itea.convergence_</span></code> dictionary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>string</em><em>, </em><em>list of string</em><em>, or </em><em>None</em><em>, </em><em>default=None</em>) – the convergence information to generate the plots. It can be a
single string or a list with strings in
<code class="docutils literal notranslate"><span class="pre">['fitness',</span> <span class="pre">'n_terms',</span> <span class="pre">'complexity']</span></code>. If set to none, then
the whole list of strings will be used.</p></li>
<li><p><strong>n_cols</strong> (<em>int</em><em>, </em><em>default=1</em>) – number of columns to be used when creating the plot grids if ax is
None.</p></li>
<li><p><strong>line_kw</strong> (<em>dict</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – dictionary with keywords to be used when generating the plots.
When set to None, then <code class="docutils literal notranslate"><span class="pre">line_kw=</span> <span class="pre">{}</span></code>.</p></li>
<li><p><strong>fill_kw</strong> (<em>dict</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – dictionary with keywords to be used when generating the plots.
When set to None, then <code class="docutils literal notranslate"><span class="pre">fill_kw=</span> <span class="pre">{'alpha'</span> <span class="pre">:</span> <span class="pre">0.15}</span></code>.</p></li>
<li><p><strong>ax</strong> (<em>matplotlib.axes</em><em> or </em><em>list of matplotlib.axes</em><em> or </em><em>None</em><em>, </em><em>default=None</em>) – axis to generate the plot. If none is given, then a new axis is
created. If is a single axis, the plot will be drawn within the
given axis. If ax is a list, then it must have the same number of
elements in <code class="docutils literal notranslate"><span class="pre">data</span></code>.</p></li>
<li><p><strong>show_err</strong> (<em>bool</em><em>, </em><em>default=True</em>) – boolean variable indicating if the standard error should be plotted.</p></li>
<li><p><strong>show</strong> (<em>bool</em><em>, </em><em>default=True</em>) – boolean value indicating if the generated plot should be displayed
or not.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <code class="docutils literal notranslate"><span class="pre">ax</span></code> or <code class="docutils literal notranslate"><span class="pre">data</span></code> has invalid values.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="_agnostic_explainers.html" class="btn btn-neutral float-right" title="Using agnostic explainers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="itea.classification.html" class="btn btn-neutral float-left" title="itea.classification" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Guilherme Aldeia.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>