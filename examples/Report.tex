\documentclass{article}%
\usepackage[T1]{fontenc}%
\usepackage[utf8]{inputenc}%
\usepackage{lmodern}%
\usepackage{textcomp}%
\usepackage{lastpage}%
\usepackage{graphicx}%
%
\usepackage[paperwidth=16cm,paperheight=12cm,tmargin=1.75cm,lmargin=1cm,rmargin=1cm,bmargin=1.5cm]{geometry}%
\usepackage[T1]{fontenc}%
\usepackage[english]{babel}%
\usepackage{datetime}%
\usepackage{grffile}%
\usepackage{booktabs}%
\usepackage{amsfonts}%
\usepackage{amssymb}%
\usepackage{amsmath}%
\usepackage{amsthm}%
\usepackage{breqn}%
\usepackage{fancyhdr}%
\usepackage{indentfirst}%
\usepackage{float}%
\title{ITEA automatic report}%
\author{\textit{ITEA\_summarizer}}%
\date{\today, \currenttime}%
\pagestyle{fancy}%
%
\begin{document}%
\normalsize%
\maketitle \vfill            
            
            Automatic report created by \textit{ITEA\_summarizer} package.
            This report makes usage of several methods to automatically inspect
            and explain the final expression found in the evolutionary process
            performed by the ITEA algorithm.

            \vfill \pagebreak%

            \lhead{Pre-execution --- ITEA automatic report}
            \chead{}
            \rhead{\today, \currenttime}
            
            \lfoot{}
            \cfoot{}
            \rfoot{\thepage\ | \pageref{LastPage}}%
\section*{Descriptive statistics of the data}%
\label{sec:Descriptivestatisticsofthedata}%

                Reporting descriptive statistics for 5
                (from a total of 8) features contained on the
                training data. The features were selected based on the absolute
                final importance.%


\begin{table}[H]%
\centering%
\footnotesize%
\begin{tabular}{lrrrrr}
\toprule
{} &     AveBedrms &        MedInc &      AveOccup &      AveRooms &      Latitude \\
\midrule
count &  13828.000000 &  13828.000000 &  13828.000000 &  13828.000000 &  13828.000000 \\
mean  &      1.097533 &      3.876745 &      3.128660 &      5.436556 &     35.651238 \\
std   &      0.445688 &      1.903102 &     12.646130 &      2.449446 &      2.134064 \\
min   &      0.333333 &      0.499900 &      0.692308 &      0.888889 &     32.550000 \\
25\%   &      1.006623 &      2.568575 &      2.432189 &      4.459802 &     33.940000 \\
50\%   &      1.049552 &      3.538750 &      2.819702 &      5.232422 &     34.270000 \\
75\%   &      1.100283 &      4.756600 &      3.282093 &      6.058566 &     37.720000 \\
max   &     25.636364 &     15.000100 &   1243.333333 &    141.909091 &     41.950000 \\
\bottomrule
\end{tabular}
%
\end{table}

%
\vfill \pagebreak

%
\section*{Algorithm Hyper-parameters}%
\label{sec:AlgorithmHyper{-}parameters}%

                The following hyperparameters were used to execute the
                algorithm. If the random\_state parameter was set to an 
                integer value (or a numpy randomState instance was given), then
                it is possible to repeat the exact execution by using the same
                training data and the parameters listed below.%
{\footnotesize \begin{verbatim}    expolim : (0, 2)
    gens : 50
    max_terms : 5
    popsize : 50
    random_state : 42
    simplify_method : simplify_by_var
    verbose : 10
    tfuncs : [log, sqrt.abs, id, sin, cos, exp]\end{verbatim} } \vfill \pagebreak

%

            \lhead{Execution --- ITEA automatic report}
            \chead{}
            \rhead{\today, \currenttime}
            
            \lfoot{}
            \cfoot{}
            \rfoot{\thepage\ | \pageref{LastPage}}
        %
\section*{Evolution convergence}%
\label{sec:Evolutionconvergence}%

                The algorithm took 127.554 seconds to
                completely run. Below are the plots for the average fitness
                of the population and the best individual fitness for each
                generation.\vfill%


\begin{figure}[H]%
\centering%
\includegraphics[width=0.8\textwidth]{/tmp/pylatex-tmp.r_zzjcqe/fitness_convergence.pdf}%
\end{figure}

%
\vfill \pagebreak

%
\section*{Best expression}%
\label{sec:Bestexpression}%

                The best expression corresponds to the expression with
                the best fitness on the last generation before the evolution
                ends. Not necessarily it will be the simpliest or the global
                optimum expression of the evoution. The final expression is a regressor with a fitness of
                0.75408, and the number of IT terms is
                5. Below is an LaTeX representation
                of the expression:\vfill {\small \begin{dmath}ITExpr = \underbrace{\beta_0 \cdot log(MedInc^{2} \cdot AveBedrms \cdot Longitude^{2})}_{\text{term 0}} + \underbrace{\beta_1 \cdot log(MedInc \cdot HouseAge \cdot AveRooms \cdot AveOccup^{2} \cdot Longitude^{2})}_{\text{term 1}} + \underbrace{\beta_2 \cdot log(HouseAge \cdot AveRooms \cdot AveBedrms \cdot AveOccup^{2} \cdot Latitude \cdot Longitude^{2})}_{\text{term 2}} + \underbrace{\beta_3 \cdot log(HouseAge^{2} \cdot AveBedrms \cdot AveOccup^{2} \cdot Latitude^{2} \cdot Longitude^{2})}_{\text{term 3}} + \underbrace{\beta_4 \cdot log(MedInc)}_{\text{term 4}} + I_0\end{dmath} } \vfill \pagebreak

%
\section*{Best expression metrics}%
\label{sec:Bestexpressionmetrics}%
On the next page is reported a table
            containing the coefficients for the previous expression, as well as
            some metrics calculated for each term individually:
            
            \begin{itemize}
            \item \textbf{coef:} coefficient of each term (or coefficients,
                  if the itexpr is an instance of ITExpr_classifier);

            \item \textbf{coef stderr:} the standard error of the coefficients;

            \item \textbf{disentang.:} mean pairwise disentanglement between
                  each term when compared with the others;

            \item \textbf{M.I.:} mean continuous mutual information between
                  each term when compared with the others;

            \item \textbf{pred. var.:} variance of the predicted outcomes for
                  each term when predicting the training data.
            \end{itemize}

             \vfill \pagebreak%


\begin{table}[H]%
\centering%
\footnotesize%
\begin{tabular}{llllrrr}
\toprule
{} &     coef &       func & coef stderr &  disentang. &   M.I. &  pred. var. \\
\midrule
term 0 &    9.924 &        log &       0.238 &       0.323 &  0.748 &      85.569 \\
term 1 &    7.982 &        log &       0.223 &       0.426 &  0.407 &      57.724 \\
term 2 &   -9.092 &        log &       0.222 &       0.361 &  0.439 &      55.374 \\
term 3 &    0.702 &        log &       0.013 &       0.312 &  0.379 &       0.778 \\
term 4 &  -25.846 &        log &       0.697 &       0.324 &  0.754 &     147.950 \\
term 5 &  -62.377 &  intercept &       1.501 &       0.000 &  0.000 &       0.000 \\
\bottomrule
\end{tabular}
%
\end{table}

%
\vfill \pagebreak

%
\section*{Partial derivatives}%
\label{sec:Partialderivatives}%
{\footnotesize\begin{dmath}\frac{\partial}{\partial MedInc} ITExpr = \underbrace{2\beta_0 \cdot log'(MedInc^{2} \cdot AveBedrms \cdot Longitude^{2})(MedInc \cdot AveBedrms \cdot Longitude^{2})}_{\text{term 0}} + \underbrace{1\beta_1 \cdot log'(MedInc \cdot HouseAge \cdot AveRooms \cdot AveOccup^{2} \cdot Longitude^{2})(HouseAge \cdot AveRooms \cdot AveOccup^{2} \cdot Longitude^{2})}_{\text{term 1}} + \underbrace{1\beta_4 \cdot log'(MedInc)()}_{\text{term 4}}\end{dmath}\begin{dmath}\frac{\partial}{\partial HouseAge} ITExpr = \underbrace{1\beta_1 \cdot log'(MedInc \cdot HouseAge \cdot AveRooms \cdot AveOccup^{2} \cdot Longitude^{2})(MedInc \cdot AveRooms \cdot AveOccup^{2} \cdot Longitude^{2})}_{\text{term 1}} + \underbrace{1\beta_2 \cdot log'(HouseAge \cdot AveRooms \cdot AveBedrms \cdot AveOccup^{2} \cdot Latitude \cdot Longitude^{2})(AveRooms \cdot AveBedrms \cdot AveOccup^{2} \cdot Latitude \cdot Longitude^{2})}_{\text{term 2}} + \underbrace{2\beta_3 \cdot log'(HouseAge^{2} \cdot AveBedrms \cdot AveOccup^{2} \cdot Latitude^{2} \cdot Longitude^{2})(HouseAge \cdot AveBedrms \cdot AveOccup^{2} \cdot Latitude^{2} \cdot Longitude^{2})}_{\text{term 3}}\end{dmath}\begin{dmath}\frac{\partial}{\partial AveRooms} ITExpr = \underbrace{1\beta_1 \cdot log'(MedInc \cdot HouseAge \cdot AveRooms \cdot AveOccup^{2} \cdot Longitude^{2})(MedInc \cdot HouseAge \cdot AveOccup^{2} \cdot Longitude^{2})}_{\text{term 1}} + \underbrace{1\beta_2 \cdot log'(HouseAge \cdot AveRooms \cdot AveBedrms \cdot AveOccup^{2} \cdot Latitude \cdot Longitude^{2})(HouseAge \cdot AveBedrms \cdot AveOccup^{2} \cdot Latitude \cdot Longitude^{2})}_{\text{term 2}}\end{dmath}\begin{dmath}\frac{\partial}{\partial AveBedrms} ITExpr = \underbrace{1\beta_0 \cdot log'(MedInc^{2} \cdot AveBedrms \cdot Longitude^{2})(MedInc^{2} \cdot Longitude^{2})}_{\text{term 0}} + \underbrace{1\beta_2 \cdot log'(HouseAge \cdot AveRooms \cdot AveBedrms \cdot AveOccup^{2} \cdot Latitude \cdot Longitude^{2})(HouseAge \cdot AveRooms \cdot AveOccup^{2} \cdot Latitude \cdot Longitude^{2})}_{\text{term 2}} + \underbrace{1\beta_3 \cdot log'(HouseAge^{2} \cdot AveBedrms \cdot AveOccup^{2} \cdot Latitude^{2} \cdot Longitude^{2})(HouseAge^{2} \cdot AveOccup^{2} \cdot Latitude^{2} \cdot Longitude^{2})}_{\text{term 3}}\end{dmath}\begin{dmath}\frac{\partial}{\partial Population} ITExpr = 0.0\end{dmath}\begin{dmath}\frac{\partial}{\partial AveOccup} ITExpr = \underbrace{2\beta_1 \cdot log'(MedInc \cdot HouseAge \cdot AveRooms \cdot AveOccup^{2} \cdot Longitude^{2})(MedInc \cdot HouseAge \cdot AveRooms \cdot AveOccup \cdot Longitude^{2})}_{\text{term 1}} + \underbrace{2\beta_2 \cdot log'(HouseAge \cdot AveRooms \cdot AveBedrms \cdot AveOccup^{2} \cdot Latitude \cdot Longitude^{2})(HouseAge \cdot AveRooms \cdot AveBedrms \cdot AveOccup \cdot Latitude \cdot Longitude^{2})}_{\text{term 2}} + \underbrace{2\beta_3 \cdot log'(HouseAge^{2} \cdot AveBedrms \cdot AveOccup^{2} \cdot Latitude^{2} \cdot Longitude^{2})(HouseAge^{2} \cdot AveBedrms \cdot AveOccup \cdot Latitude^{2} \cdot Longitude^{2})}_{\text{term 3}}\end{dmath}\begin{dmath}\frac{\partial}{\partial Latitude} ITExpr = \underbrace{1\beta_2 \cdot log'(HouseAge \cdot AveRooms \cdot AveBedrms \cdot AveOccup^{2} \cdot Latitude \cdot Longitude^{2})(HouseAge \cdot AveRooms \cdot AveBedrms \cdot AveOccup^{2} \cdot Longitude^{2})}_{\text{term 2}} + \underbrace{2\beta_3 \cdot log'(HouseAge^{2} \cdot AveBedrms \cdot AveOccup^{2} \cdot Latitude^{2} \cdot Longitude^{2})(HouseAge^{2} \cdot AveBedrms \cdot AveOccup^{2} \cdot Latitude \cdot Longitude^{2})}_{\text{term 3}}\end{dmath}\begin{dmath}\frac{\partial}{\partial Longitude} ITExpr = \underbrace{2\beta_0 \cdot log'(MedInc^{2} \cdot AveBedrms \cdot Longitude^{2})(MedInc^{2} \cdot AveBedrms \cdot Longitude)}_{\text{term 0}} + \underbrace{2\beta_1 \cdot log'(MedInc \cdot HouseAge \cdot AveRooms \cdot AveOccup^{2} \cdot Longitude^{2})(MedInc \cdot HouseAge \cdot AveRooms \cdot AveOccup^{2} \cdot Longitude)}_{\text{term 1}} + \underbrace{2\beta_2 \cdot log'(HouseAge \cdot AveRooms \cdot AveBedrms \cdot AveOccup^{2} \cdot Latitude \cdot Longitude^{2})(HouseAge \cdot AveRooms \cdot AveBedrms \cdot AveOccup^{2} \cdot Latitude \cdot Longitude)}_{\text{term 2}} + \underbrace{2\beta_3 \cdot log'(HouseAge^{2} \cdot AveBedrms \cdot AveOccup^{2} \cdot Latitude^{2} \cdot Longitude^{2})(HouseAge^{2} \cdot AveBedrms \cdot AveOccup^{2} \cdot Latitude^{2} \cdot Longitude)}_{\text{term 3}}\end{dmath}} \vfill \pagebreak

%

            \lhead{post-execution --- ITEA automatic report}
            \chead{}
            \rhead{\today, \currenttime}
            
            \lfoot{}
            \cfoot{}
            \rfoot{\thepage\ | \pageref{LastPage}}
        %
\section*{\textit{Average partial Effects}}%
\label{sec:textitAveragepartialEffects}%

                Feature importances with Average Partial Effects. This method
                attributes the importance to the i-th variable by calculating
                the average of the partial derivative w.r.t. i, evaluated for
                all data in the training set.

                \vfill%


\begin{figure}[H]%
\centering%
\includegraphics[width=0.8\textwidth]{/tmp/pylatex-tmp.r_zzjcqe/average_partial_effects.pdf}%
\end{figure}

%
\vfill \pagebreak

%
\section*{\textit{Normalized partial Effects}}%
\label{sec:textitNormalizedpartialEffects}%

                Feature importances with Normalized Partial Effects. 
                To create this plot, first, the output interval is discretized.
                Then, for each interval, the partial effect of all samples
                in the training set that results in a prediction within the
                interval are calculated. Finally, they are normalized in
                order to make the total contribution by 100\%.

                \vfill%


\begin{figure}[H]%
\centering%
\includegraphics[width=0.8\textwidth]{/tmp/pylatex-tmp.r_zzjcqe/normalized_partial_effects.pdf}%
\end{figure}

%
\vfill \pagebreak

%
\section*{\textit{Partial Effects at the Means}}%
\label{sec:textitPartialEffectsattheMeans}%

                Partial Effects plots created by fixing the co-variables at
                the means and evaluating the model's output when only one
                variable changes. For simplicity, at most 5 variables are
                selected to create the plot (the 5 most important variables
                considering their Average Partial Effects).

                \vfill%


\begin{figure}[H]%
\centering%
\includegraphics[width=\textwidth]{/tmp/pylatex-tmp.r_zzjcqe/partial_effets_at_means.pdf}%
\end{figure}

%
\vfill \pagebreak

%
\end{document}